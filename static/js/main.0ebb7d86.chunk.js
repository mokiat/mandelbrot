(this.webpackJsonpmandelbrot=this.webpackJsonpmandelbrot||[]).push([[0],{15:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return f}));var i=n(35),a=n.n(i),r=n(41),o=n(29),c=n(0),u=n(42),s=n(51),h=n(43),l=n.n(h),g=n(4),f=Object.freeze({ZOOM_IN:"zoom-in",ZOOM_OUT:"zoom-out"}),d=50,m=function(t,e){if(!e)return{x:0,y:0,width:Math.min(d,t.getWidth()),height:Math.min(d,t.getHeight())};var n=e.x+d,i=e.y;return n>=t.getWidth()&&(n=0,i+=d),i>=t.getHeight()?null:{x:n,y:i,width:Math.min(d,t.getWidth()-n),height:Math.min(d,t.getHeight()-i)}},p=function(t,e,n){return{left:n.left+n.width*(e.x/t.getWidth()),top:n.top+n.height*(e.y/t.getHeight()),width:n.width*(e.width/t.getWidth()),height:n.height*(e.height/t.getHeight())}},b=function(t,e){t.prepareArea(e)},O=function(t,e,n){t.renderArea(e,n)},j=function(e){var n=e.className,i=e.width,h=e.height,f=e.pointerX,d=e.pointerY,j=e.pixelsPerUnit,v=e.onClick,x=Object(c.useRef)(null),y=Object(c.useState)(null),w=Object(o.a)(y,2),k=w[0],M=w[1],I=i/j,N=h/j,C=Object(c.useMemo)((function(){return{left:f-I/2,top:d-N/2,width:I,height:N}}),[f,d,I,N]);Object(c.useEffect)((function(){M(new u.a(x.current))}),[i,h]),l()(function(){var e=Object(r.a)(a.a.mark((function e(n){var i,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:i=new s.a(k),r=m(k,null);case 4:if(!r||!n()){e.next=14;break}return o=p(k,r,C),O(i,r,o),(r=m(k,r))&&b(i,r),k.swapBuffers(),e.next=12,new Promise((function(e){return t((function(){return e()}))}));case 12:e.next=4;break;case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,C]);return Object(g.jsx)("canvas",{ref:x,className:n,width:i,height:h,onClick:function(t){t.preventDefault();var e=t.target.getBoundingClientRect(),n=(t.clientX-e.left)/(e.right-e.left),i=(t.clientY-e.top)/(e.bottom-e.top);v(C.left+n*C.width,C.top+i*C.height)}})};j.defaultProps={onClick:function(){}},e.b=j}).call(this,n(62).setImmediate)},42:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(21),a=n(22),r=function(){function t(e){Object(i.a)(this,t),this.width=e.width,this.height=e.height,this.context=e.getContext("2d"),this.imageData=this.context.createImageData(this.width,this.height),this.pixels=new Uint32Array(this.imageData.data.buffer)}return Object(a.a)(t,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"putPixel",value:function(t,e,n){this.pixels[t+e*this.width]=n}},{key:"swapBuffers",value:function(){this.context.putImageData(this.imageData,0,0)}}]),t}()},51:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(21),a=n(22),r=function(t,e,n){return 255<<24|(255*n&255)<<16|(255*e&255)<<8|255*t&255},o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(i.a)(this,t),this.real=e,this.imaginary=n}return Object(a.a)(t,[{key:"getReal",value:function(){return this.real}},{key:"setReal",value:function(t){this.real=t}},{key:"getImaginary",value:function(){return this.imaginary}},{key:"setImaginary",value:function(t){this.imaginary=t}},{key:"setTo",value:function(t){this.real=t.getReal(),this.imaginary=t.getImaginary()}},{key:"getLengthSquared",value:function(){return this.real*this.real+this.imaginary*this.imaginary}},{key:"inc",value:function(t){this.real+=t.getReal(),this.imaginary+=t.getImaginary()}},{key:"dec",value:function(t){this.real-=t.getReal(),this.imaginary-=t.getImaginary()}},{key:"square",value:function(){var t=this.real*this.real-this.imaginary*this.imaginary,e=2*this.real*this.imaginary;this.real=t,this.imaginary=e}}]),t}(),c=function(t,e){var n=t/e,i=Math.pow(n,2),a=Math.abs(Math.sin(3*Math.PI*n)),o=Math.abs(Math.cos(.5*Math.PI*n)),c=1-15/(25+500*n);return r(Math.min(i*c,1),Math.min(a*c,1),Math.min(o*c,1))},u=new o,s=function(t,e){u.setTo(t);for(var n=0;n<e;n++){if(u.getLengthSquared()>=4)return n;u.square(),u.inc(t)}return-1},h=r(1,1,1),l=function(){function t(e){Object(i.a)(this,t),this.surface=e,this.palette=function(t){var e=[];e.push(r(0,0,0));for(var n=1;n<=t;n++)e.push(c(n,t));return function(t){return e[t+1]}}(1e3)}return Object(a.a)(t,[{key:"prepareArea",value:function(t){for(var e=t.x,n=t.y,i=e+t.width,a=n+t.height,r=n;r<a;r++)for(var o=e;o<i;o++)this.surface.putPixel(o,r,h)}},{key:"renderArea",value:function(t,e){var n=t.x,i=t.y,a=n+t.width,r=i+t.height,c=e.left,u=e.top,h=e.width/t.width,l=e.height/t.height,g=new o;g.setImaginary(u);for(var f=i;f<r;f++){g.setReal(c);for(var d=n;d<a;d++){var m=s(g,1e3);this.surface.putPixel(d,f,this.palette(m)),g.setReal(g.getReal()+h)}g.setImaginary(g.getImaginary()+l)}}},{key:"renderToSurface",value:function(){this.surface.swapBuffers()}}]),t}()},61:function(t,e,n){},77:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(20),o=n.n(r),c=(n(61),n(6)),u=n(50),s=n(29),h=n(3),l=n(7),g=n(99),f=n(102),d=n(100),m=n(79),p=n(78),b=n(101),O=n(48),j=n.n(O),v=n(49),x=n.n(v),y=n(104),w=n(103),k=n(15),M=n(4),I=function(t){var e=t.classes,n=t.pointerX,a=t.pointerY,r=t.pixelsPerUnit,o=t.onViewportChange,c=Object(i.useState)(k.a.ZOOM_IN),u=Object(s.a)(c,2),l=u[0],O=u[1];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(g.a,{position:"static",children:Object(M.jsxs)(d.a,{className:e.toolbar,children:[Object(M.jsx)(m.a,{variant:"h6",className:e.title,children:"Mandelbrot Set"}),Object(M.jsx)(b.a,{color:"inherit",href:"http://github.com/mokiat/mandelbrot",target:"_blank",rel:"noopener noreferrer",children:"Source Code"})]})}),Object(M.jsx)(f.a,{className:e.container,maxWidth:"md",children:Object(M.jsxs)(p.a,{className:e.paper,elevation:4,children:[Object(M.jsx)(k.b,{className:Object(h.a)(e.visualization,l===k.a.ZOOM_IN&&"zoomIn",l===k.a.ZOOM_OUT&&"zoomOut"),width:800,height:600,pointerX:n,pointerY:a,pixelsPerUnit:r,onClick:function(t,e){var n;switch(l){case k.a.ZOOM_IN:n=2*r;break;case k.a.ZOOM_OUT:n=r/2;break;default:n=r}n<100&&(t=-.5,e=0,n=100),o(t,e,n)}}),Object(M.jsx)("div",{className:e.overlay,children:Object(M.jsxs)(y.a,{className:e.buttonGroup,"aria-label":"zoom mode",size:"small",value:l,exclusive:!0,onChange:function(t,e){e&&O(e)},children:[Object(M.jsx)(w.a,{value:k.a.ZOOM_IN,selected:l===k.a.ZOOM_IN,"aria-label":"zoom in",children:Object(M.jsx)(j.a,{})}),Object(M.jsx)(w.a,{value:k.a.ZOOM_OUT,selected:l===k.a.ZOOM_OUT,"aria-label":"zoom out",children:Object(M.jsx)(x.a,{})})]})})]})})]})};I.defaultProps={onViewportChange:function(){}};var N=Object(l.a)({toolbar:{backgroundColor:"white",color:"black"},title:{flexGrow:1},container:{textAlign:"center"},paper:{position:"relative",margin:"10px auto",padding:"10px"},visualization:{width:"100%",height:"auto","&.zoomIn":{cursor:"zoom-in"},"&.zoomOut":{cursor:"zoom-out"},backgroundColor:"black"},overlay:{position:"absolute",bottom:"20px",right:"20px"},buttonGroup:{backgroundColor:"white"}})(I),C=function(){var t=Object(c.d)(),e=new URLSearchParams(Object(c.e)().hash.substring(1)),n=Number(e.get("x")||"-0.5"),i=Number(e.get("y")||"0"),a=Number(e.get("ppu")||"200");return Object(M.jsx)(N,{pointerX:n,pointerY:i,pixelsPerUnit:a,onViewportChange:function(e,n,i){var a=encodeURIComponent(e),r=encodeURIComponent(n),o=encodeURIComponent(i);t.push("#x=".concat(a,"&y=").concat(r,"&ppu=").concat(o))}})},z=function(){return Object(M.jsx)(u.a,{children:Object(M.jsx)(C,{})})};o.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(z,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.0ebb7d86.chunk.js.map